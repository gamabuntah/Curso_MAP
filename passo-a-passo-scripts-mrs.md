# üöÄ PASSO A PASSO COMPLETO - SCRIPTS E OPERA√á√ïES CURSO MRS

## üìã RESUMO EXECUTIVO
Este documento detalha todos os scripts e opera√ß√µes necess√°rias para replicar o sistema PNSB para o curso MRS (Manejo de Res√≠duos S√≥lidos), garantindo layout id√™ntico e qualidade preservada.

---

## üéØ OBJETIVO FINAL
Criar um sistema de curso MRS com:
- ‚úÖ 7 m√≥dulos (vs 8 do PNSB)
- ‚úÖ Layout 100% id√™ntico ao PNSB
- ‚úÖ 15 quest√µes por m√≥dulo + 50 na avalia√ß√£o final
- ‚úÖ Convers√£o inteligente de .txt para JSON
- ‚úÖ Sistema de certificados e portabilidade

---

## üõ†Ô∏è FASE 1: PREPARA√á√ÉO E VERIFICA√á√ÉO

### **PASSO 1.1: Verifica√ß√£o do Ambiente**
```bash
# Script: verificar-ambiente.js
# Verifica√ß√µes autom√°ticas:
- Node.js instalado (vers√£o 14+)
- npm dispon√≠vel
- Estrutura do projeto PNSB intacta
- Permiss√µes de escrita na pasta
- Portas 3001 e 8000 livres (PNSB)
- Portas 3002 e 8001 livres (MRS)
```

### **PASSO 1.2: An√°lise dos Arquivos MRS**
```bash
# Script: analisar-arquivos-mrs.js
# Verifica√ß√£o autom√°tica:
- Confirmar 7 arquivos .txt na pasta MRS/
- Confirmar 7 arquivos .wav na pasta MRS/Audios/
- Verificar tamanhos e integridade dos arquivos
- Validar nomenclatura: "Curso MRS - Mod X.wav"
```

### **PASSO 1.3: Cria√ß√£o da Estrutura de Trabalho**
```bash
# Opera√ß√£o manual/autom√°tica
mkdir replicador-curso-mrs
cd replicador-curso-mrs
mkdir scripts templates conteudo output
mkdir conteudo/modulos conteudo/audios
mkdir output/curso-mrs
```

---

## FASE 2: REPLICA√á√ÉO DA ESTRUTURA PNSB

### **PASSO 2.1: C√≥pia Completa do Projeto PNSB**
```bash
# Script: copiar-estrutura-pnsb.js
# Copiar estrutura base:
- Copiar pasta backend/ (excluir node_modules)
- Copiar pasta public/ (excluir dados espec√≠ficos)
- Copiar scripts batch essenciais
- Copiar arquivos de configura√ß√£o base
```

**Arquivos copiados:**
- `backend/server.js`, `backend/package.json`
- `public/index.html`, `public/style.css`, `public/script.js`
- `public/progress-manager.js`, `public/certificate-manager.js`
- `iniciar-sistema.bat`, `parar-sistema.bat`, `backup-dados.bat`

### **PASSO 2.2: Limpeza de Dados Espec√≠ficos**
```bash
# Script: limpar-dados-pnsb.js
# Remover dados do PNSB:
- Remover public/data/module1.js at√© module8.js
- Remover public/data/avaliacaoFinal.js
- Remover public/MAP/ (conte√∫do espec√≠fico)
- Remover config-sistema.json (ser√° recriado)
```

---

## ‚öôÔ∏è FASE 3: ADAPTA√á√ÉO DE CONFIGURA√á√ïES

### **PASSO 3.1: Cria√ß√£o do config-sistema.json**
```json
// Script: criar-config-mrs.js
{
  "curso": {
    "nome": "Manejo de Res√≠duos S√≥lidos",
    "sigla": "MRS",
    "modulos": 7,
    "questoesPorModulo": 15,
    "questoesAvaliacaoFinal": 50
  },
  "portas": {
    "backend": 3002,
    "frontend": 8001
  },
  "audios": {
    "formato": "wav",
    "prefixo": "Curso MRS - Mod"
  }
}
```

### **PASSO 3.2: Adapta√ß√£o do backend/server.js**
```javascript
// Script: adaptar-backend.js
// Modifica√ß√µes:
- Porta do servidor: 3002
- Refer√™ncias de m√≥dulos: 7 em vez de 8
- Configura√ß√µes espec√≠ficas do MRS
```

### **PASSO 3.3: Adapta√ß√£o do public/script.js**
```javascript
// Script: adaptar-frontend.js
// Modifica√ß√µes:
- N√∫mero de m√≥dulos: 7
- Refer√™ncias de √°udio: "Curso MRS - Mod X"
- T√≠tulos dos m√≥dulos (7 t√≠tulos espec√≠ficos):
  * "M√≥dulo 1: Introdu√ß√£o ao Saneamento B√°sico e √† PNSB"
  * "M√≥dulo 2: Estrutura do Question√°rio MRS da PNSB 2024"
  * "M√≥dulo 3: Aspectos Legais, Terceiriza√ß√£o e Coleta Convencional"
  * "M√≥dulo 4: MRS em √Åreas Especiais e Coleta Seletiva"
  * "M√≥dulo 5: Manejo de Res√≠duos S√≥lidos Especiais"
  * "M√≥dulo 6: Unidades de Destina√ß√£o/Disposi√ß√£o Final"
  * "M√≥dulo 7: Entidades de Catadores, Ve√≠culos e Educa√ß√£o Ambiental"
- Configura√ß√µes de progresso
```

### **PASSO 3.4: Adapta√ß√£o do public/progress-manager.js**
```javascript
// Script: adaptar-progress-manager.js
// Modifica√ß√µes:
- L√≥gica de progresso para 7 m√≥dulos
- Desbloqueio sequencial
- Valida√ß√£o de conclus√£o
```

---

## üîÑ FASE 4: CONVERS√ÉO .TXT ‚Üí JSON

### **PASSO 4.1: Processamento dos Arquivos .txt**
```bash
# Script: processar-arquivos-txt.js
# Para cada m√≥dulo (1 a 7):
1. Ler arquivo .txt
2. Remover refer√™ncias bibliogr√°ficas [1], [2], [3], etc.
3. Identificar estrutura (t√≠tulo, resumo, se√ß√µes)
4. Extrair conte√∫do integral
5. Identificar elementos para cards especiais
```

### **PASSO 4.2: Cria√ß√£o de Cards Inteligentes**
```javascript
// Script: criar-cards-inteligentes.js
// Algoritmo de cria√ß√£o:

// Card 1: Resumo (Sempre Presente)
{
  type: "default",
  title: "Resumo do M√≥dulo",
  content: "Primeiro par√°grafo do m√≥dulo",
  icon: "üìã"
}

// Card 2: Conte√∫do Principal (Sempre Presente)
{
  type: "default",
  title: "Conte√∫do Principal",
  content: "Se√ß√µes 1.1, 1.2, 1.3, etc.",
  icon: "üìö"
}

// Card 3: Dica (Opcional - Inteligente)
// Criado se encontrar: "importante", "aten√ß√£o", "dica"
{
  type: "dica",
  title: "üí° Dica Importante",
  content: "Dicas pr√°ticas extra√≠das",
  icon: "üí°"
}

// Card 4: Exemplo (Opcional - Inteligente)
// Criado se encontrar: "por exemplo", "como", "caso"
{
  type: "exemplo",
  title: "üìù Exemplo Pr√°tico",
  content: "Exemplos pr√°ticos",
  icon: "üìù"
}

// Card 5: D√∫vidas Frequentes (Opcional - Inteligente)
// Criado se m√≥dulo for complexo
{
  type: "duvidas",
  title: "üó®Ô∏è D√∫vidas Frequentes",
  content: "‚ùì D√∫vida + üí° Como Ajudar",
  icon: "üó®Ô∏è"
}

// Card 6: Resumo Visual (Opcional - Inteligente)
// Criado se tiver listas ou conceitos importantes
{
  type: "resumo visual",
  title: "üìä Resumo Visual",
  content: "Pontos-chave visuais",
  icon: "üìä"
}
```

### **PASSO 4.3: Gera√ß√£o dos Arquivos JSON dos M√≥dulos**
```javascript
// Script: gerar-modulos-json.js
// Estrutura final para cada m√≥dulo:
{
  id: 1,
  titulo: "M√≥dulo 1: Introdu√ß√£o ao Saneamento B√°sico e √† PNSB",
  audio: "Curso MRS - Mod 1.wav",
  cards: [
    // Array com os cards criados
  ],
  quiz: {
    // 15 quest√µes do m√≥dulo
  }
}
```

---

## ‚ùì FASE 5: GERA√á√ÉO DE QUEST√ïES

### **PASSO 5.1: Gera√ß√£o de Quest√µes por M√≥dulo**
```bash
# Script: gerar-questoes-modulos.js
# Para cada m√≥dulo (1 a 7):
1. Analisar conte√∫do do m√≥dulo
2. Gerar 15 quest√µes baseadas no conte√∫do
3. Criar 4 alternativas por quest√£o
4. Definir alternativa correta
5. Criar feedback educativo para cada alternativa
6. Embaralhar alternativas automaticamente
```

**Estrutura da Quest√£o:**
```javascript
{
  pergunta: "Texto da pergunta baseada no conte√∫do",
  alternativas: [
    {
      texto: "Alternativa A",
      correta: false,
      feedback: "Explica√ß√£o educativa sobre por que est√° incorreta"
    },
    {
      texto: "Alternativa B",
      correta: true,
      feedback: "Explica√ß√£o educativa sobre por que est√° correta"
    },
    {
      texto: "Alternativa C",
      correta: false,
      feedback: "Explica√ß√£o educativa sobre por que est√° incorreta"
    },
    {
      texto: "Alternativa D",
      correta: false,
      feedback: "Explica√ß√£o educativa sobre por que est√° incorreta"
    }
  ]
}
```

### **PASSO 5.2: Gera√ß√£o da Avalia√ß√£o Final**
```bash
# Script: gerar-avaliacao-final.js
# Avalia√ß√£o final com 50 quest√µes:
1. Selecionar quest√µes de todos os 7 m√≥dulos
2. Distribuir equilibradamente (7-8 quest√µes por m√≥dulo)
3. Manter padr√£o de 4 alternativas
4. Incluir feedbacks educativos
5. Embaralhar alternativas
```

---

## üé® FASE 6: PRESERVA√á√ÉO DO LAYOUT

### **PASSO 6.1: Verifica√ß√£o de Arquivos de Layout**
```bash
# Script: verificar-layout.js
# Arquivos que N√ÉO devem ser modificados:
- public/style.css (preservar 100%)
- public/certificate-manager.js (preservar 100%)
- public/index.html (apenas t√≠tulos e refer√™ncias)
```

### **PASSO 6.2: Adapta√ß√µes M√≠nimas Necess√°rias**
```bash
# Script: adaptar-layout.js
# Apenas estas modifica√ß√µes:
- T√≠tulos no index.html
- Refer√™ncias de m√≥dulos no script.js
- N√∫mero de m√≥dulos no progress-manager.js
- Configura√ß√µes no config-sistema.json
```

### **PASSO 6.3: C√≥pia dos √Åudios**
```bash
# Script: copiar-audios.js
# Copiar arquivos de √°udio:
- MRS/Audios/ ‚Üí public/MRS/Audios/
- Verificar integridade dos arquivos
- Confirmar nomenclatura correta
```

---

## üß™ FASE 7: TESTES E VALIDA√á√ÉO

### **PASSO 7.1: Testes de Estrutura**
```bash
# Script: testar-estrutura.js
# Verificar:
- Todos os arquivos presentes
- Estrutura de pastas correta
- Configura√ß√µes v√°lidas
- Refer√™ncias de √°udio existem
```

### **PASSO 7.2: Testes de Funcionalidade**
```bash
# Script: testar-funcionalidade.js
# Testar:
- Backend inicia na porta 3002
- Frontend carrega na porta 8001
- Navega√ß√£o entre m√≥dulos
- Sistema de progresso
- Player de √°udio
- Quizzes funcionais
- Certificados geram
```

### **PASSO 7.3: Testes de Conte√∫do**
```bash
# Script: testar-conteudo.js
# Verificar:
- Todos os 7 m√≥dulos carregam
- 15 quest√µes por m√≥dulo
- 50 quest√µes na avalia√ß√£o final
- Feedbacks educativos presentes
- √Åudios reproduzem corretamente
```

### **PASSO 7.4: Testes de Layout**
```bash
# Script: testar-layout.js
# Verificar:
- Layout id√™ntico ao PNSB
- Paleta de cores preservada
- Cards funcionam corretamente
- Responsividade mantida
- Anima√ß√µes suaves
```

---

## üì¶ FASE 8: FINALIZA√á√ÉO E ENTREGA

### **PASSO 8.1: Organiza√ß√£o Final**
```bash
# Script: organizar-final.js
# Estrutura final:
- Remover arquivos tempor√°rios
- Organizar pastas
- Verificar permiss√µes
- Criar README.md
```

### **PASSO 8.2: Cria√ß√£o de Scripts de Uso**
```bash
# Script: criar-scripts-uso.js
# Scripts finais:
- iniciar-sistema.bat (porta 8001)
- parar-sistema.bat
- backup-dados.bat
- README.md com instru√ß√µes
```

### **PASSO 8.3: Documenta√ß√£o Final**
```markdown
# Script: criar-documentacao.js
# README.md final com:
- Instru√ß√µes de instala√ß√£o
- Como usar o sistema
- Estrutura do curso
- Contato para suporte
```

---

## üõ†Ô∏è ESTRUTURA DE SCRIPTS NECESS√ÅRIOS

### **üìÅ Organiza√ß√£o dos Scripts:**
```
replicador-curso-mrs/
‚îú‚îÄ‚îÄ replicar-curso-mrs.bat          # Script principal
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ verificar-ambiente.js       # Fase 1.1
‚îÇ   ‚îú‚îÄ‚îÄ analisar-arquivos-mrs.js    # Fase 1.2
‚îÇ   ‚îú‚îÄ‚îÄ copiar-estrutura-pnsb.js    # Fase 2.1
‚îÇ   ‚îú‚îÄ‚îÄ limpar-dados-pnsb.js        # Fase 2.2
‚îÇ   ‚îú‚îÄ‚îÄ criar-config-mrs.js         # Fase 3.1
‚îÇ   ‚îú‚îÄ‚îÄ adaptar-backend.js          # Fase 3.2
‚îÇ   ‚îú‚îÄ‚îÄ adaptar-frontend.js         # Fase 3.3
‚îÇ   ‚îú‚îÄ‚îÄ adaptar-progress-manager.js # Fase 3.4
‚îÇ   ‚îú‚îÄ‚îÄ processar-arquivos-txt.js   # Fase 4.1
‚îÇ   ‚îú‚îÄ‚îÄ criar-cards-inteligentes.js # Fase 4.2
‚îÇ   ‚îú‚îÄ‚îÄ gerar-modulos-json.js       # Fase 4.3
‚îÇ   ‚îú‚îÄ‚îÄ gerar-questoes-modulos.js   # Fase 5.1
‚îÇ   ‚îú‚îÄ‚îÄ gerar-avaliacao-final.js    # Fase 5.2
‚îÇ   ‚îú‚îÄ‚îÄ verificar-layout.js         # Fase 6.1
‚îÇ   ‚îú‚îÄ‚îÄ adaptar-layout.js           # Fase 6.2
‚îÇ   ‚îú‚îÄ‚îÄ copiar-audios.js            # Fase 6.3
‚îÇ   ‚îú‚îÄ‚îÄ testar-estrutura.js         # Fase 7.1
‚îÇ   ‚îú‚îÄ‚îÄ testar-funcionalidade.js    # Fase 7.2
‚îÇ   ‚îú‚îÄ‚îÄ testar-conteudo.js          # Fase 7.3
‚îÇ   ‚îú‚îÄ‚îÄ testar-layout.js            # Fase 7.4
‚îÇ   ‚îú‚îÄ‚îÄ organizar-final.js          # Fase 8.1
‚îÇ   ‚îú‚îÄ‚îÄ criar-scripts-uso.js        # Fase 8.2
‚îÇ   ‚îî‚îÄ‚îÄ criar-documentacao.js       # Fase 8.3
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ module-template.js
‚îÇ   ‚îú‚îÄ‚îÄ quiz-template.js
‚îÇ   ‚îî‚îÄ‚îÄ config-template.json
‚îî‚îÄ‚îÄ output/
    ‚îî‚îÄ‚îÄ curso-mrs/
```

---

## üìã DETALHAMENTO DOS SCRIPTS PRINCIPAIS

### **1. SCRIPT PRINCIPAL: `replicar-curso-mrs.bat`**
```batch
@echo off
chcp 65001 >nul
title Replicador de Sistema de Curso MRS

echo.
echo ========================================
echo    REPLICADOR DE SISTEMA CURSO MRS
echo ========================================
echo.

:: Verificar ambiente
node scripts/verificar-ambiente.js
if errorlevel 1 (
    echo ‚ùå ERRO: Ambiente n√£o adequado!
    pause
    exit /b 1
)

:: Analisar arquivos MRS
node scripts/analisar-arquivos-mrs.js
if errorlevel 1 (
    echo ‚ùå ERRO: Arquivos MRS n√£o encontrados!
    pause
    exit /b 1
)

:: Executar todas as fases
echo üöÄ Iniciando replica√ß√£o...
node scripts/copiar-estrutura-pnsb.js
node scripts/limpar-dados-pnsb.js
node scripts/criar-config-mrs.js
node scripts/adaptar-backend.js
node scripts/adaptar-frontend.js
node scripts/adaptar-progress-manager.js
node scripts/processar-arquivos-txt.js
node scripts/criar-cards-inteligentes.js
node scripts/gerar-modulos-json.js
node scripts/gerar-questoes-modulos.js
node scripts/gerar-avaliacao-final.js
node scripts/verificar-layout.js
node scripts/adaptar-layout.js
node scripts/copiar-audios.js
node scripts/testar-estrutura.js
node scripts/testar-funcionalidade.js
node scripts/testar-conteudo.js
node scripts/testar-layout.js
node scripts/organizar-final.js
node scripts/criar-scripts-uso.js
node scripts/criar-documentacao.js

echo.
echo ‚úÖ REPLICA√á√ÉO CONCLU√çDA COM SUCESSO!
echo üìÅ Resultado em: output/curso-mrs/
echo üöÄ Para iniciar: cd output/curso-mrs && iniciar-sistema.bat
echo.
pause
```

### **2. SCRIPT DE VERIFICA√á√ÉO: `verificar-ambiente.js`**
```javascript
const fs = require('fs');
const { execSync } = require('child_process');

console.log('üîç Verificando ambiente...');

// Verificar Node.js
try {
    const nodeVersion = execSync('node --version').toString().trim();
    console.log(`‚úÖ Node.js: ${nodeVersion}`);
} catch (error) {
    console.error('‚ùå Node.js n√£o encontrado!');
    process.exit(1);
}

// Verificar npm
try {
    const npmVersion = execSync('npm --version').toString().trim();
    console.log(`‚úÖ npm: ${npmVersion}`);
} catch (error) {
    console.error('‚ùå npm n√£o encontrado!');
    process.exit(1);
}

// Verificar projeto PNSB
if (!fs.existsSync('../public/data/module1.js')) {
    console.error('‚ùå Projeto PNSB n√£o encontrado!');
    process.exit(1);
}
console.log('‚úÖ Projeto PNSB encontrado');

// Verificar portas
// ... l√≥gica de verifica√ß√£o de portas

console.log('‚úÖ Ambiente verificado com sucesso!');
```

### **3. SCRIPT DE PROCESSAMENTO: `processar-arquivos-txt.js`**
```javascript
const fs = require('fs');
const path = require('path');

console.log('üìÑ Processando arquivos .txt...');

const modulosDir = '../MRS/';
const modulos = [];

// Ler todos os arquivos .txt
const arquivos = fs.readdirSync(modulosDir)
    .filter(file => file.endsWith('.txt'))
    .sort();

for (let i = 0; i < arquivos.length; i++) {
    const arquivo = arquivos[i];
    const conteudo = fs.readFileSync(path.join(modulosDir, arquivo), 'utf8');
    
    // Remover refer√™ncias bibliogr√°ficas [1], [2], [3], etc.
    const conteudoLimpo = conteudo.replace(/\[\d+\]/g, '');
    
    // Extrair t√≠tulo
    const tituloMatch = conteudoLimpo.match(/^([^\n]+)/);
    const titulo = tituloMatch ? tituloMatch[1].trim() : `M√≥dulo ${i + 1}`;
    
    // Extrair resumo
    const resumoMatch = conteudoLimpo.match(/Resumo\n([^\n]+)/);
    const resumo = resumoMatch ? resumoMatch[1].trim() : '';
    
    // Extrair se√ß√µes
    const secoes = conteudoLimpo.split(/\d+\.\d+/).slice(1);
    
    modulos.push({
        id: i + 1,
        titulo,
        resumo,
        secoes,
        audio: `Curso MRS - Mod ${i + 1}.wav`
    });
}

console.log(`‚úÖ Processados ${modulos.length} m√≥dulos`);
module.exports = modulos;
```

---

## ‚úÖ CHECKLIST DE EXECU√á√ÉO

### **‚úÖ Fase 1 - Prepara√ß√£o:**
- [ ] Verifica√ß√£o do ambiente
- [ ] An√°lise dos arquivos MRS
- [ ] Cria√ß√£o da estrutura de trabalho

### **‚úÖ Fase 2 - Replica√ß√£o:**
- [ ] C√≥pia da estrutura PNSB
- [ ] Limpeza de dados espec√≠ficos

### **‚úÖ Fase 3 - Adapta√ß√£o:**
- [ ] Cria√ß√£o do config-sistema.json
- [ ] Adapta√ß√£o do backend
- [ ] Adapta√ß√£o do frontend
- [ ] Adapta√ß√£o do progress-manager

### **‚úÖ Fase 4 - Convers√£o:**
- [ ] Processamento dos arquivos .txt
- [ ] Cria√ß√£o de cards inteligentes
- [ ] Gera√ß√£o dos m√≥dulos JSON

### **‚úÖ Fase 5 - Quest√µes:**
- [ ] Gera√ß√£o de quest√µes por m√≥dulo
- [ ] Gera√ß√£o da avalia√ß√£o final

### **‚úÖ Fase 6 - Layout:**
- [ ] Verifica√ß√£o de layout
- [ ] Adapta√ß√µes m√≠nimas
- [ ] C√≥pia dos √°udios

### **‚úÖ Fase 7 - Testes:**
- [ ] Testes de estrutura
- [ ] Testes de funcionalidade
- [ ] Testes de conte√∫do
- [ ] Testes de layout

### **‚úÖ Fase 8 - Finaliza√ß√£o:**
- [ ] Organiza√ß√£o final
- [ ] Cria√ß√£o de scripts de uso
- [ ] Documenta√ß√£o final

---

## üéØ RESULTADO FINAL ESPERADO

**Sistema MRS completo com:**
- ‚úÖ Layout 100% id√™ntico ao PNSB
- ‚úÖ 7 m√≥dulos funcionais
- ‚úÖ 155 quest√µes totais (105 modulares + 50 finais)
- ‚úÖ Sistema de certificados
- ‚úÖ Portabilidade total
- ‚úÖ Qualidade educativa preservada

**üéØ CURSO MRS - PRONTO PARA USO! üèÜ**

---

## üìù NOTAS IMPORTANTES

1. **Todos os scripts** devem ser executados na ordem especificada
2. **Verifica√ß√µes** s√£o feitas automaticamente em cada fase
3. **Backup** do projeto PNSB original √© recomendado
4. **Testes** s√£o executados automaticamente no final
5. **Documenta√ß√£o** √© gerada automaticamente

---

**üèÜ SISTEMA DE SCRIPTS COMPLETO PARA REPLICA√á√ÉO DO CURSO MRS! üöÄ** 